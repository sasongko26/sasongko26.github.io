<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Aktivasi zram | Catatan Sasongko</title>
<meta name="keywords" content="slackware, kernel, boot, elilo, zram">
<meta name="description" content="Beberapa tahun ini perkembangan dunia opensource bagus. Berbagai teknologi berkembang. Di antara teknologi tersebut adalah grafis yang semakin menawan, lebih tajam, dan disertai efek-efek yang sangat menarik. Perkembangan dari sisi software berjalan beriringan dengan hardware. Semakin tinggi spesifikasi hardware semakin baik grafis yang dihasilkan. Demikian pula sebaliknya, apabila ingin interface yang aduhai menawan, seyogyanya diimbangi hardware yang mumpuni.
Perangkat yang penulis gunakan saat ini bisa dikatakan ketinggalan jaman. Tahun 2016, dengan RAM hanya 2 GB untuk komputasi perkantoran sehari-hari sangat layak dan bisa diandalkan. Namun, saat ini, saat kebutuhan multitasking meningkat pesat, terlebih di era work from home (WFH), beberapa aplikasi dijalankan sekaligus bersama-sama, apalagi ditambah dengan faktor U perangkatnya, RAM 2 GB terasa cepat penuh.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/post/2021-01-26-aktivasi-zram/">
<link crossorigin="anonymous" href="http://localhost:1313/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/post/2021-01-26-aktivasi-zram/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Catatan Sasongko (Alt + H)">Catatan Sasongko</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span><i class='fa fa-home fa-fw'></i>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/post/" title="Posts">
                    <span><i class='fa fa-list fa-fw'></i>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="Profil">
                    <span><i class='fa fa-user fa-fw'></i>Profil</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/logo/" title="Logo">
                    <span><i class='fa fa-user fa-fw'></i>Logo</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Aktivasi zram
    </h1>
    <div class="post-meta"><span title='2021-01-26 00:00:00 +0000 UTC'>26 Jan 2021</span>

</div>
  </header> 
  <div class="post-content"><p>Beberapa tahun ini perkembangan dunia <em>opensource</em> bagus. Berbagai teknologi berkembang. Di antara teknologi tersebut adalah grafis yang semakin menawan, lebih tajam, dan disertai efek-efek yang sangat menarik. Perkembangan dari sisi <em>software</em> berjalan beriringan dengan <em>hardware</em>. Semakin tinggi spesifikasi <em>hardware</em> semakin baik grafis yang dihasilkan. Demikian pula sebaliknya, apabila ingin <em>interface</em> yang aduhai menawan, seyogyanya diimbangi <em>hardware</em> yang mumpuni.</p>
<p>Perangkat yang penulis gunakan saat ini bisa dikatakan ketinggalan jaman. Tahun 2016, dengan RAM hanya 2 GB untuk komputasi perkantoran sehari-hari sangat layak dan bisa diandalkan. Namun, saat ini, saat kebutuhan <em>multitasking</em> meningkat pesat, terlebih di era <em>work from home</em> (WFH), beberapa aplikasi dijalankan sekaligus bersama-sama, apalagi ditambah dengan faktor U perangkatnya, RAM 2 GB terasa cepat penuh.</p>
<p><em>Upgrade</em> RAM? RAM-nya <em>onboard</em>. Di sinilah <strong>keuntungan menggunakan linux</strong> penulis rasakan. <strong>Linux</strong> yang <em>opensource</em> dikembangkan banyak orang. Ribuan orang bergotong-royong membuat semakin baik dari masa ke masa untuk semua kalangan. Tak terkecuali kalangan dengan <em>hardware</em> jadul semacam penulis.</p>
<p>Solusi itu bernama <strong>zram</strong>. Dengan <strong>zram</strong> sebagian proses di RAM akan dikompres sehingga menghemat RAM. RAM lebih lega. Sisa kapasitas RAM masih bisa digunakan untuk yang lainnya. Misal, tanpa <strong>zram</strong> menjalankan <em>zoom meeting</em> dengan <em>share screen</em> <strong>libreoffice impress</strong> yang berjalan dalam DE <strong>Plasma 5</strong>, terasa agak lambat saat pindah <em>slide</em> presentasi. Dengan <strong>zram</strong> tidak lagi terjadi.</p>
<p>Bukankah ada partisi <strong>swap</strong>? Betul, tetapi <strong>swap</strong> menggunakan <em>harddisk</em> sedangkan <strong>zram</strong> memakai RAM. Kecepatan olah data lebih cepat menggunakan RAM.</p>
<p>Oke, sekarang bagaimana teknisnya?</p>
<p>Buat file <code>/etc/rc.d/rc.zram</code>. File ini akan dieksekusi segera setelah <em>booting</em>. Contohnya adalah seperti di bawah ini, yang saya dapatkan dari repo gitlabnya walecha (Terima kasih Pak Walesa).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -r /etc/default/zram <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  . /etc/default/zram
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># See /sys/block/zramX/comp_algo for available compression algorithm</span>
</span></span><span class="line"><span class="cl">  <span class="nv">ZRAMCOMP</span><span class="o">=</span>zstd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># ZRAM device to use</span>
</span></span><span class="line"><span class="cl">  <span class="nv">ZRAMDEV</span><span class="o">=</span>/dev/zram0
</span></span><span class="line"><span class="cl">  <span class="c1"># Or if you want to use last available zram device</span>
</span></span><span class="line"><span class="cl">  <span class="c1">#ZRAMDEV=$(/sbin/zramctl -f)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># Set it to fixed value in gigabytes, for example 4GB:</span>
</span></span><span class="line"><span class="cl">  <span class="nv">ZRAMSIZE</span><span class="o">=</span><span class="s2">&#34;1G&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># Or calculate by divide total available RAM by DIVNUM. Change it as you wish.</span>
</span></span><span class="line"><span class="cl">  <span class="c1">#DIVNUM=3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1"># Use higher priority than on-disk swap, priority is a value between -1 and 32767</span>
</span></span><span class="line"><span class="cl">  <span class="nv">SWAPPRIORITY</span><span class="o">=</span><span class="m">100</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">f_test<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># Disable zswap</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="k">$(</span>cat /sys/module/zswap/parameters/enabled<span class="k">)</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;Y&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="m">0</span> &gt;/sys/module/zswap/parameters/enabled
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> /sbin/swaplabel <span class="nv">$ZRAMDEV</span> 2&gt;/dev/null <span class="p">|</span> grep -q <span class="s1">&#39;UUID:&#39;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> cat /proc/swaps <span class="p">|</span> grep -q <span class="s2">&#34;</span><span class="nv">$ZRAMDEV</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">f_create<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  f_test
</span></span><span class="line"><span class="cl">  <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">2</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Formatting </span><span class="nv">$ZRAMDEV</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    /sbin/zramctl -a <span class="si">${</span><span class="nv">ZRAMCOMP</span><span class="si">}</span> -s <span class="si">${</span><span class="nv">ZRAMSIZE</span><span class="si">}</span> <span class="si">${</span><span class="nv">ZRAMDEV</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    /sbin/mkswap -f -L ZRAMSWAP <span class="si">${</span><span class="nv">ZRAMDEV</span><span class="si">}</span> &gt;/dev/null
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">f_start<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  f_test
</span></span><span class="line"><span class="cl">  <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Starting </span><span class="nv">$ZRAMDEV</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    /sbin/swapon -p <span class="si">${</span><span class="nv">SWAPPRIORITY</span><span class="si">}</span> <span class="si">${</span><span class="nv">ZRAMDEV</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">f_stop<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  f_test
</span></span><span class="line"><span class="cl">  <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Stopping </span><span class="nv">$ZRAMDEV</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    /sbin/swapoff <span class="si">${</span><span class="nv">ZRAMDEV</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">f_reset<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  f_test
</span></span><span class="line"><span class="cl">  <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;Resetting </span><span class="nv">$ZRAMDEV</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="m">1</span> &gt;/sys/block/<span class="k">$(</span>basename <span class="nv">$ZRAMDEV</span><span class="k">)</span>/reset
</span></span><span class="line"><span class="cl">  <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
</span></span><span class="line"><span class="cl">  create<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_create
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  start<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_create
</span></span><span class="line"><span class="cl">    f_start
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  stop<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_stop
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  restart<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_stop
</span></span><span class="line"><span class="cl">    sleep <span class="m">1</span>
</span></span><span class="line"><span class="cl">    f_start
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  reset<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_reset
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  forcereset<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_stop
</span></span><span class="line"><span class="cl">    sleep <span class="m">1</span>
</span></span><span class="line"><span class="cl">    f_reset
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  status<span class="o">)</span>
</span></span><span class="line"><span class="cl">    f_test
</span></span><span class="line"><span class="cl">    <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;Status </span><span class="nv">$ZRAMDEV</span><span class="s2">: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> <span class="s2">&#34;active&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> <span class="s2">&#34;not active&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">  *<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$0</span><span class="s2">: create|start|stop|restart|reset|forcereset|status&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span></code></pre></div><p>Di sini, 50% RAM digunakan untuk <strong>zram</strong>. Maka <strong>ZRAMSIZE</strong> 1G.</p>
<p>Jangan lupa beri hak akses eksekusi. <em>Command</em> dijalankan oleh <strong>root</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ chmod +x /etc/rc.d/rc.zram
</span></span></code></pre></div><p>Kemudian sertakan ke <code>/etc/rc.d/rc.local</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -x /etc/rc.d/rc.zram <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		/etc/rc.d/rc.zram start
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>Kemudian pastikan kernel modul <strong>zram</strong> bisa di-<em>load</em>. Secara <em>default</em> modul <strong>zram</strong> bersifat modular yang tidak secara otomatis <em>load</em>. Ada 2 cara</p>
<ol>
<li>Memasukkan ke dalam <strong>initrd</strong>.
Penulis terbiasa membuat <strong>initrd</strong> dengan bantuan <strong>mkinird_command_generator</strong>. Di sini ditambahkan <code>-m zram</code>. Sehingga pembuatannya <strong>initrd</strong>-nya (<em>command</em> dijalankan oleh <strong>root</strong>. Ini sangat mungkin berbeda dengan milik pembaca. Berbeda dari sisi versi kernel (opsi -k), partisi root (opsi -r), modul yang di-<em>load</em> dan lokasi <strong>initrd</strong> yang diinginkan. Secara <em>default</em> di  /boot (opsi -o). Tapi penulis di /boot/efi/EFI/Slackware.</li>
</ol>
<pre tabindex="0"><code>mkinitrd -c -k 5.10.10 -f ext4 -r /dev/sda3 -m xhci-pci:ohci-pci:ehci-pci:xhci-hcd:uhci-hcd:ehci-hcd:hid:usbhid:i2c-hid:hid_generic:hid-asus:hid-cherry:hid-logitech:hid-logitech-dj:hid-logitech-hidpp:hid-lenovo:hid-microsoft:hid_multitouch:jbd2:mbcache:ext4:zram -u -o /boot/initrd.gz
</code></pre><p>Kemudian sertakan <strong>initrd</strong> ke <em>boot loader</em>. Penulis gunakan <em>boot loader</em> <strong>elilo</strong> dengan <strong>kernel generic</strong>, <strong>initrd</strong>-nya <strong>initrd.gz</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">image</span><span class="o">=</span>generic
</span></span><span class="line"><span class="cl">    <span class="nv">label</span><span class="o">=</span>generic
</span></span><span class="line"><span class="cl">    <span class="nv">initrd</span><span class="o">=</span>initrd.gz
</span></span><span class="line"><span class="cl">    read-only
</span></span><span class="line"><span class="cl">    <span class="nv">append</span><span class="o">=</span><span class="s2">&#34;root=/dev/sda3 vga=normal ro&#34;</span>
</span></span></code></pre></div><ol start="2">
<li>Menggunakan <strong>modprobe</strong>.
Modul <strong>zram</strong> di-<em>load</em> belakangan. Pada bagian awal dari <code>/etc/rc.d/rc.zram</code> (bisa tepat di bawah <em>shebang</em>/baris 2) tambahkan</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">modprobe zram
</span></span></code></pre></div><p>Selesai, selamat menikmati.</p>
<p><img loading="lazy" src="http://localhost:1313/gambar/htop-with-zram-battery.png"></p>
<p>Pada kasus ini, tampak bahwa penggunaan zram 24,8 MB (dengan kompresi), sedangkan apabila tanpa dikompres atau tanpa zram membutuhkan <em>memory</em> 177 MB.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/slackware/">Slackware</a></li>
      <li><a href="http://localhost:1313/tags/kernel/">Kernel</a></li>
      <li><a href="http://localhost:1313/tags/boot/">Boot</a></li>
      <li><a href="http://localhost:1313/tags/elilo/">Elilo</a></li>
      <li><a href="http://localhost:1313/tags/zram/">Zram</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Catatan Sasongko</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
